require 'rails_helper'

RSpec.describe DataNormalization, type: :model do
  
  describe "data normalization"
	  let(:data_set_before_normalization) {
	  	[ 
	  		8,12,31,39,43,45,
				5,10,11,22,25,27,
				18,19,20,26,45,49,
				2,11,14,37,40,45,
				8,10,15,35,39,49,
				24,26,31,35,43,47,
				13,20,23,29,38,44,
				8,13,15,22,38,47,
				3,10,27,29,34,42,
				4,5,6,13,23,25
			]
	  }

	  let(:data_set_after_normalization_by_maximum) {
	  	[
	  		0.16326530612244897, 
	  		0.24489795918367346, 
	  		0.6326530612244898, 
	  		0.7959183673469388, 
	  		0.8775510204081632, 
	  		0.9183673469387755, 
	  		0.10204081632653061, 
	  		0.20408163265306123, 
	  		0.22448979591836735,
	  		0.4489795918367347,
				0.5102040816326531,
				0.5510204081632653,
				0.3673469387755102,
				0.3877551020408163,
				0.40816326530612246,
				0.5306122448979592,
				0.9183673469387755,
				1.0,
				0.04081632653061224,
				0.22448979591836735,
				0.2857142857142857,
				0.7551020408163265,
				0.8163265306122449,
				0.9183673469387755,
				0.16326530612244897,
				0.20408163265306123,
				0.30612244897959184,
				0.7142857142857143,
				0.7959183673469388,
				1.0,
				0.4897959183673469,
				0.5306122448979592,
				0.6326530612244898,
				0.7142857142857143,
				0.8775510204081632,
				0.9591836734693877,
				0.2653061224489796,
				0.40816326530612246,
				0.46938775510204084,
				0.5918367346938775,
				0.7755102040816326,
				0.8979591836734694,
				0.16326530612244897,
				0.2653061224489796,
				0.30612244897959184,
				0.4489795918367347,
				0.7755102040816326,
				0.9591836734693877,
				0.061224489795918366,
				0.20408163265306123,
				0.5510204081632653,
				0.5918367346938775,
				0.6938775510204082,
				0.8571428571428571,
				0.08163265306122448,
				0.10204081632653061,
				0.12244897959183673,
				0.2653061224489796,
				0.46938775510204084,
				0.5102040816326531
			] 
	  }

	  let(:data_set_after_normalization_by_average) {
	  	[
	  		0.32064128256513025,
				0.4809619238476954,
				1.24248496993988,
				1.56312625250501,
				1.723446893787575,
				1.8036072144288577,
				0.20040080160320642,
				0.40080160320641284,
				0.4408817635270541,
				0.8817635270541082,
				1.0020040080160322,
				1.0821643286573146,
				0.7214428857715431,
				0.7615230460921844,
				0.8016032064128257,
				1.0420841683366733,
				1.8036072144288577,
				1.9639278557114228,
				0.08016032064128256,
				0.4408817635270541,
				0.561122244488978,
				1.4829659318637276,
				1.6032064128256514,
				1.8036072144288577,
				0.32064128256513025,
				0.40080160320641284,
				0.6012024048096193,
				1.402805611222445,
				1.56312625250501,
				1.9639278557114228,
				0.9619238476953909,
				1.0420841683366733,
				1.24248496993988,
				1.402805611222445,
				1.723446893787575,
				1.8837675350701404,
				0.5210420841683366,
				0.8016032064128257,
				0.9218436873747495,
				1.1623246492985972,
				1.5230460921843687,
				1.7635270541082164,
				0.32064128256513025,
				0.5210420841683366,
				0.6012024048096193,
				0.8817635270541082,
				1.5230460921843687,
				1.8837675350701404,
				0.12024048096192386,
				0.40080160320641284,
				1.0821643286573146,
				1.1623246492985972,
				1.3627254509018036,
				1.683366733466934,
				0.16032064128256512,
				0.20040080160320642,
				0.2404809619238477,
				0.5210420841683366,
				0.9218436873747495,
				1.0020040080160322
			] 
	  }

	  let(:data_normalization) { DataNormalization.new(data_set_before_normalization) }

	  it "#by_maximum" do
	  	expect(data_normalization.by_maximum).to eq data_set_after_normalization_by_maximum
	  end

	  it "#by_maximum sets max attribute" do
	  	data_normalization.by_maximum
	  	expect(data_normalization.max).to eq 49
	  end

	  it "#by_average" do
	  	expect(data_normalization.by_average).to eq data_set_after_normalization_by_average
	  end

	  it "#by_average sets avg attribute" do
	  	data_normalization.by_average 
	  	expect(data_normalization.avg).to eq 24.95
	  end
	end

